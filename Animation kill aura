local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")

-- ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°
local FireCooldown = false
local PlayingShoot = false
local SkateActive = false
local EnabledFire = true

-- ‡∏™‡∏£‡πâ‡∏≤‡∏á GUI ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏¥‡∏á
local FireGui = Instance.new("ScreenGui")
FireGui.Name = "FireGui"
FireGui.Parent = game.CoreGui

local FireButton = Instance.new("TextButton")
FireButton.Size = UDim2.new(0, 100, 0, 100)
FireButton.Position = UDim2.new(0.8, 0, 0.7, 0)
FireButton.Text = "‡∏¢‡∏¥‡∏á"
FireButton.Font = Enum.Font.SourceSansBold
FireButton.TextSize = 30
FireButton.BackgroundColor3 = Color3.fromRGB(200,50,50)
FireButton.TextColor3 = Color3.fromRGB(255,255,255)
FireButton.Parent = FireGui

local UICorner1 = Instance.new("UICorner", FireButton)
UICorner1.CornerRadius = UDim.new(0,50)

-- ‡∏™‡∏£‡πâ‡∏≤‡∏á GUI ‡∏õ‡∏∏‡πà‡∏° Skate üõπ
local SkateGui = Instance.new("ScreenGui")
SkateGui.Name = "SkateGui"
SkateGui.Parent = game.CoreGui

local SkateButton = Instance.new("TextButton")
SkateButton.Size = UDim2.new(0, 100, 0, 100)
SkateButton.Position = UDim2.new(0.6, 0, 0.7, 0)
SkateButton.Text = "üõπ"
SkateButton.Font = Enum.Font.SourceSansBold
SkateButton.TextSize = 30
SkateButton.BackgroundColor3 = Color3.fromRGB(50,50,200)
SkateButton.TextColor3 = Color3.fromRGB(255,255,255)
SkateButton.Parent = SkateGui

local UICorner2 = Instance.new("UICorner", SkateButton)
UICorner2.CornerRadius = UDim.new(0,50)

-- ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠
local CenterMsgGui = Instance.new("ScreenGui")
CenterMsgGui.Parent = game.CoreGui
local CenterMsg = Instance.new("TextLabel")
CenterMsg.Size = UDim2.new(0,400,0,50)
CenterMsg.Position = UDim2.new(0.5,-200,0.4,0)
CenterMsg.Text = ""
CenterMsg.TextColor3 = Color3.fromRGB(255,255,255)
CenterMsg.BackgroundTransparency = 0.5
CenterMsg.BackgroundColor3 = Color3.fromRGB(0,0,0)
CenterMsg.Font = Enum.Font.SourceSansBold
CenterMsg.TextScaled = true
CenterMsg.Visible = false
CenterMsg.Parent = CenterMsgGui
-- Animation IDs
local AnimWalkId = 133669151185294
local AnimShootId = 121573002971812
local AnimIdleId = 101810746304426
local AnimSkateId = 100663712757148

-- ‡πÇ‡∏´‡∏•‡∏î AnimationTrack
local function loadAnim(id)
    local anim = Instance.new("Animation")
    anim.AnimationId = "rbxassetid://"..id
    return LocalPlayer.Character.Humanoid:LoadAnimation(anim)
end

local WalkAnim = loadAnim(AnimWalkId)
local ShootAnim = loadAnim(AnimShootId)
local IdleAnim = loadAnim(AnimIdleId)
local SkateAnim = loadAnim(AnimSkateId)

-- ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
PlayingShoot = false

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏î‡∏¥‡∏ô/‡∏¢‡∏∑‡∏ô
local function UpdateMovementAnimation()
    if SkateActive or PlayingShoot then return end -- ‡∏ñ‡πâ‡∏≤ Skate ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏¥‡∏á‡∏≠‡∏¢‡∏π‡πà ‡πÑ‡∏°‡πà‡πÄ‡∏•‡πà‡∏ô Walk/Idle
    local humanoid = LocalPlayer.Character:FindFirstChild("Humanoid")
    if not humanoid then return end
    local speed = humanoid.MoveDirection.Magnitude
    if speed > 0.1 then
        if not WalkAnim.IsPlaying then
            IdleAnim:Stop()
            WalkAnim:Play()
        end
    else
        if not IdleAnim.IsPlaying then
            WalkAnim:Stop()
            IdleAnim:Play()
        end
    end
end

-- Heartbeat ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÄ‡∏î‡∏¥‡∏ô/‡∏¢‡∏∑‡∏ô
RunService.Heartbeat:Connect(function()
    UpdateMovementAnimation()
end)
-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÇ‡∏ä‡∏ß‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠
local function showCenterMsg(text,duration)
    CenterMsg.Text = text
    CenterMsg.Visible = true
    task.delay(duration or 1, function()
        CenterMsg.Visible = false
    end)
end

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏¢‡∏¥‡∏á (‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Kill Aura 0.5 ‡∏ß‡∏¥)
local function FireWeapon()
    if FireCooldown then return end
    if SkateActive then
        showCenterMsg("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡∏¥‡∏á‡πÑ‡∏î‡πâüö´",1)
        return
    end
    FireCooldown = true
    PlayingShoot = true

    -- ‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏î‡∏¥‡∏ô/Idle
    WalkAnim:Stop()
    IdleAnim:Stop()

    -- ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏¢‡∏¥‡∏á
    ShootAnim:Play()

    -- Kill Aura ‡∏£‡∏±‡∏ß 0.5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
    local targetPlayer = nil
    task.spawn(function()
        local startTime = tick()
        while tick() - startTime < 0.5 do
            -- ‡πÉ‡∏™‡πà‡πÇ‡∏Ñ‡πâ‡∏î Kill Aura ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
            -- ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å ShootAdvanced(targetPlayer) ‡∏´‡∏£‡∏∑‡∏≠ WarpAndShootAdvanced(targetPlayer)
            -- pcall(ShootAdvanced,targetPlayer) -- ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
            task.wait(0.1)
        end
    end)

    -- ‡∏£‡∏≠‡∏à‡∏ô‡∏¢‡∏¥‡∏á‡∏à‡∏ö
    ShootAnim.Stopped:Wait()
    PlayingShoot = false
    FireCooldown = false
end

-- ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏¥‡∏á
FireButton.MouseButton1Click:Connect(FireWeapon)
local NormalSpeed = 16
local SkateSpeed = 45

SkateButton.MouseButton1Click:Connect(function()
    local humanoid = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid")
    if not humanoid then return end

    SkateActive = not SkateActive

    if SkateActive then
        -- ‡∏õ‡∏¥‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏¥‡∏á‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß
        EnabledFire = false
        FireButton.Text = "üö´"

        -- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß
        humanoid.WalkSpeed = SkateSpeed

        -- ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡πà‡∏ô Skate
        SkateAnim:Play()
        WalkAnim:Stop()
        IdleAnim:Stop()
    else
        -- ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏õ‡∏Å‡∏ï‡∏¥
        EnabledFire = true
        FireButton.Text = "‡∏¢‡∏¥‡∏á"

        humanoid.WalkSpeed = NormalSpeed

        -- ‡∏´‡∏¢‡∏∏‡∏î Skate animation
        SkateAnim:Stop()
    end
end)
