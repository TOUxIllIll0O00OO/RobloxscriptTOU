--// LocalScript GUI + Animation Controller
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°
local EnabledFire = true
local SkateActive = false
local FireCooldown = false
local CurrentSpeed = 16

-- GUI ‡∏´‡∏•‡∏±‡∏Å
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "AnimationGUI"
ScreenGui.Parent = game.CoreGui

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 250, 0, 200)
Frame.Position = UDim2.new(0.4,0,0.4,0)
Frame.BackgroundColor3 = Color3.fromRGB(30,30,30)
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

local UICorner = Instance.new("UICorner", Frame)
UICorner.CornerRadius = UDim.new(0,8)

-- ‡∏õ‡∏∏‡πà‡∏°‡∏¢‡∏¥‡∏á
local FireButton = Instance.new("TextButton")
FireButton.Size = UDim2.new(0, 80, 0, 40)
FireButton.Position = UDim2.new(0, 10, 0, 10)
FireButton.Text = "‡∏¢‡∏¥‡∏á"
FireButton.BackgroundColor3 = Color3.fromRGB(70,70,70)
FireButton.TextColor3 = Color3.fromRGB(255,255,255)
FireButton.Font = Enum.Font.SourceSansBold
FireButton.TextSize = 18
FireButton.Parent = Frame
local FireUICorner = Instance.new("UICorner", FireButton)
FireUICorner.CornerRadius = UDim.new(0,20)

-- ‡∏õ‡∏∏‡πà‡∏° Skate
local SkateButton = Instance.new("TextButton")
SkateButton.Size = UDim2.new(0, 80, 0, 40)
SkateButton.Position = UDim2.new(0, 100, 0, 10)
SkateButton.Text = "üõπ"
SkateButton.BackgroundColor3 = Color3.fromRGB(70,30,70)
SkateButton.TextColor3 = Color3.fromRGB(255,255,255)
SkateButton.Font = Enum.Font.SourceSansBold
SkateButton.TextSize = 18
SkateButton.Parent = Frame
local SkateUICorner = Instance.new("UICorner", SkateButton)
SkateUICorner.CornerRadius = UDim.new(0,20)

-- ‡∏ä‡πà‡∏≠‡∏á‡πÅ‡∏à‡πâ‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠
local CenterMsg = Instance.new("TextLabel")
CenterMsg.Size = UDim2.new(0, 300, 0, 50)
CenterMsg.Position = UDim2.new(0.5, -150, 0.3, -25)
CenterMsg.BackgroundTransparency = 0.5
CenterMsg.BackgroundColor3 = Color3.fromRGB(0,0,0)
CenterMsg.TextColor3 = Color3.fromRGB(255,0,0)
CenterMsg.Font = Enum.Font.SourceSansBold
CenterMsg.TextSize = 25
CenterMsg.Text = ""
CenterMsg.Visible = false
CenterMsg.Parent = ScreenGui
-- Animation IDs
local AnimWalkId = 133669151185294
local AnimShootId = 121573002971812
local AnimIdleId = 101810746304426
local AnimSkateId = 100663712757148

-- ‡πÇ‡∏´‡∏•‡∏î AnimationTrack
local function loadAnim(id)
    local anim = Instance.new("Animation")
    anim.AnimationId = "rbxassetid://"..id
    return LocalPlayer.Character.Humanoid:LoadAnimation(anim)
end

local WalkAnim = loadAnim(AnimWalkId)
local ShootAnim = loadAnim(AnimShootId)
local IdleAnim = loadAnim(AnimIdleId)
local SkateAnim = loadAnim(AnimSkateId)

-- ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
local PlayingShoot = false

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏î‡∏¥‡∏ô/‡∏¢‡∏∑‡∏ô
local function UpdateMovementAnimation()
    if SkateActive then return end -- ‡∏ñ‡πâ‡∏≤ Skate ‡πÑ‡∏°‡πà‡πÄ‡∏•‡πà‡∏ô Walk/Idle
    local humanoid = LocalPlayer.Character:FindFirstChild("Humanoid")
    if not humanoid then return end
    local speed = humanoid.MoveDirection.Magnitude
    if speed > 0.1 then
        if not WalkAnim.IsPlaying then
            IdleAnim:Stop()
            WalkAnim:Play()
        end
    else
        if not IdleAnim.IsPlaying then
            WalkAnim:Stop()
            IdleAnim:Play()
        end
    end
end

-- Heartbeat ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÄ‡∏î‡∏¥‡∏ô/‡∏¢‡∏∑‡∏ô
RunService.Heartbeat:Connect(function()
    UpdateMovementAnimation()
end)
-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠
local function ShowCenterMsg(text, duration)
    CenterMsg.Text = text
    CenterMsg.Visible = true
    task.delay(duration or 1, function()
        CenterMsg.Visible = false
    end)
end

-- ‡∏¢‡∏¥‡∏á Animation + ‡∏Ñ‡∏π‡∏•‡∏î‡∏≤‡∏ß‡∏ô‡πå
FireButton.MouseButton1Click:Connect(function()
    if not EnabledFire then
        ShowCenterMsg("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡∏¥‡∏á‡πÑ‡∏î‡πâ üö´", 1.5)
        return
    end
    if FireCooldown then return end
    FireCooldown = true
    PlayingShoot = true
    -- ‡πÄ‡∏•‡πà‡∏ô Animation ‡∏¢‡∏¥‡∏á
    WalkAnim:Stop()
    IdleAnim:Stop()
    ShootAnim:Play()
    -- ‡πÄ‡∏ß‡∏•‡∏≤ Animation ‡∏¢‡∏¥‡∏á 0.5 ‡∏ß‡∏¥
    task.delay(0.5, function()
        ShootAnim:Stop()
        PlayingShoot = false
    end)
    -- ‡∏Ñ‡∏π‡∏•‡∏î‡∏≤‡∏ß‡∏ô‡πå‡∏õ‡∏∏‡πà‡∏° 1 ‡∏ß‡∏¥
    task.delay(1, function()
        FireCooldown = false
    end)
end)

-- ‡∏õ‡∏∏‡πà‡∏° Skate üõπ
SkateButton.MouseButton1Click:Connect(function()
    SkateActive = not SkateActive
    local humanoid = LocalPlayer.Character:FindFirstChild("Humanoid")
    if not humanoid then return end

    if SkateActive then
        -- ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏¢‡∏¥‡∏á‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß
        EnabledFire = false
        FireButton.Text = "üö´"
        humanoid.WalkSpeed = 45
        -- ‡πÄ‡∏•‡πà‡∏ô Skate Animation
        WalkAnim:Stop()
        IdleAnim:Stop()
        ShootAnim:Stop()
        SkateAnim:Play()
    else
        -- ‡πÄ‡∏õ‡∏¥‡∏î‡∏¢‡∏¥‡∏á‡πÑ‡∏î‡πâ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
        EnabledFire = true
        FireButton.Text = "‡∏¢‡∏¥‡∏á"
        humanoid.WalkSpeed = 16
        SkateAnim:Stop()
        UpdateMovementAnimation()
    end
end)
